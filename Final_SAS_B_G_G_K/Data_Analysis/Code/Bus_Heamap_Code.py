import folium
from folium import plugins
import os
from folium.plugins import AntPath

map = folium.Map(location=[39.36136106, 22.93288320], zoom_start=20)


# **Trip 1 Go** 
stop_id_trip1go = ["009", "111", "109", "024", "023", "021", "022", "108", "080", "081", "082", "106", "110", "105", "537", "085", "104", "245", "406", "089", "090", "091", "092", "093", "538", "103", "095", "096", "097"]
stop_lat_trip1go = [39.36136106, 39.36215812, 39.36216762, 39.36137758, 39.36088393, 39.36357456, 39.36522082, 39.36721318, 39.36803915, 39.36918300,
                    39.37034003, 39.36989698, 39.36916288, 39.37081106, 39.37217403, 39.37416168, 39.37624293, 39.37798738, 39.37999549, 39.38178195,
                    39.38411530, 39.38302064, 39.38201068, 39.38234629, 39.38403872, 39.38509346, 39.38605962, 39.38757297, 39.38681581]
stop_lon_trip1go = [22.93288320, 22.93514470, 22.93973430, 22.94332156, 22.94709222, 22.94957881, 22.95112601, 22.94963057, 22.94814557, 22.94608085,
                    22.94398220, 22.94223892, 22.94034177, 22.93966016, 22.93938541, 22.93900266, 22.93898265, 22.94127424, 22.94007524, 22.93984634,
                    22.93915303, 22.93668618, 22.93492740, 22.93402973, 22.93431822, 22.93614110, 22.93839027, 22.93891077, 22.94170417]
boarding_trip1go = [14, 2, 0, 5, 1, 5, 5, 2, 1, 1, 2, 0, 1, 3, 2, 0, 0, 0, 0, 0, 0, 0, 0, 9, 1, 0, 0, 1, 0]
unboarding_trip1go = [0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 3, 0, 2, 1, 2, 4, 0, 1, 0, 4, 6, 0, 0, 0, 1, 28]
secstop_trip1go = [0, 9, 0, 13, 8, 14, 12, 10, 9, 9, 8, 8, 8, 11, 10, 11, 9, 10, 11, 0, 8, 0, 12, 16, 9, 0, 0, 9, 0]
time_delay_trip1go = [0, 4, 3, 2, 4, 4, 3, 2, 2, 3, 2, 2, 1, 2, 2, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 10, 2]
arr_time_trip1go = ["7:35:00 πμ", "7:36:00 πμ", "7:38:00 πμ", "7:40:00 πμ", "7:40:00 πμ", "7:41:00 πμ", "7:43:00 πμ", "7:44:00 πμ", "7:45:00 πμ", "7:45:00 πμ", "7:46:00 πμ", "7:47:00 πμ", "7:48:00 πμ", "7:48:00 πμ", "7:49:00 πμ", "7:51:00 πμ", "7:53:00 πμ", "7:54:00 πμ", "7:54:00 πμ", "7:55:00 πμ", "7:55:00 πμ", "7:56:00 πμ", "7:56:00 πμ", "7:57:00 πμ", "7:57:00 πμ", "7:58:00 πμ", "7:58:00 πμ", "7:59:00 πμ", "8:00:00 πμ"]
parked_car_trip1go = ["ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΝΑΙ", "ΝΑΙ", "ΝΑΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΝΑΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΝΑΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ"]
bus_lane_trip1go = ["ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΝΑΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ"]

# **Trip 1 Come**
stop_id_trip1come = ["009", "139", "030", "031", "032", "033", "157", "035", "374", "373", "372", "493", "370", "369", "083", "481", "501", "297", "295", "088", "476", "395", "458", "518", "514", "539", "094", "095", "498", "097"]
stop_lat_trip1come = [39.36136106, 39.36077844, 39.36214198, 39.36231483, 39.36211532, 
                      39.36151356, 39.36178413, 39.36498898, 39.36708182, 39.36794196, 
                      39.36894837, 39.37014210, 39.36984994, 39.36932386, 39.36998164, 
                      39.37216122, 39.37415221208357,39.3758723392, 39.37812275, 39.37990869, 
                      39.38179698, 39.38407013, 39.38298429, 39.38195998, 39.38232453, 
                      39.38409265, 39.38505766, 39.38610022, 39.38768229, 39.38681581]
stop_lon_trip1come = [22.93288320, 22.93343187, 22.93490889, 22.94010927, 22.94351001, 
                      22.94484682, 22.94628430, 22.94914580, 22.94968852, 22.94818737, 
                      22.94634166, 22.94415983, 22.94231831, 22.94092933, 22.93979662, 
                      22.93934571, 22.93896113514612, 22.938617157, 22.94108833, 22.94003079, 
                      22.93980353, 22.93915795, 22.93671654, 22.93492312, 22.93397525, 
                      22.93431884, 22.93598064, 22.93838232, 22.93893073, 22.94170417]
boarding_trip1come = [1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 4, 4, 4, 1, 2, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0]
unboarding_trip1come = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 2, 12, 1, 1, 0, 0, 0, 2, 0]
secstop_trip1come = [0, 0, 8, 9, 0, 9, 0, 0, 9, 0, 9, 12, 12, 11, 9, 10, 8, 9, 0, 0, 9, 8, 13, 9, 9, 0, 0, 0, 9, 0]
time_delay_trip1come = [0, 6, 6, 6, 7, 5, 6, 6, 6, 5, 5, 5, 5, 4, 4, 3, 4, 3, 3, 4, 3, 3, 3, 2, 0, 1, 0, 1, 1, 2 ]
arr_time_trip1come = ["8:05:00 πμ", "8:05:00 πμ", "8:06:00 πμ", "8:06:00 πμ", "8:06:00 πμ", "8:08:00 πμ", "8:08:00 πμ", "8:09:00 πμ", "8:10:00 πμ", "8:11:00 πμ", "8:12:00 πμ", "8:13:00 πμ", "8:14:00 πμ", "8:16:00 πμ", "8:17:00 πμ", "8:18:00 πμ", "8:18:00 πμ", "8:19:00 πμ", "8:20:00 πμ", "8:20:00 πμ", "8:21:00 πμ", "8:22:00 πμ", "8:23:00 πμ", "8:26:00 πμ", "8:29:00 πμ", "8:29:00 πμ", "8:30:00 πμ", "8:31:00 πμ", "8:32:00 πμ", "8:33:00 πμ"]
parked_car_trip1come = ["ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΝΑΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΝΑΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ"]
bus_lane_trip1come = ["ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΝΑΙ", "ΝΑΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ"]

# **Trip 2 Go**
stop_id_trip2go = ["009", "111", "109", "024", "023", "021", "022", "108", "080", "081", "082", "106", "110", "105", "537", "085", "104", "245", "406", "089", "090", "091", "092", "093", "538", "103", "095", "096", "097"]
stop_lat_trip2go = [39.36136106, 39.36215812, 39.36216762, 39.36137758, 39.36088393, 39.36357456, 39.36522082, 39.36721318, 39.36803915, 39.36918300,
                    39.37034003, 39.36989698, 39.36916288, 39.37081106, 39.37217403, 39.37416168, 39.37624293, 39.37798738, 39.37999549, 39.38178195,
                    39.38411530, 39.38302064, 39.38201068, 39.38234629, 39.38403872, 39.38509346, 39.38605962, 39.38757297, 39.38681581]
stop_lon_trip2go = [22.93288320, 22.93514470, 22.93973430, 22.94332156, 22.94709222, 22.94957881, 22.95112601, 22.94963057, 22.94814557, 22.94608085,
                    22.94398220, 22.94223892, 22.94034177, 22.93966016, 22.93938541, 22.93900266, 22.93898265, 22.94127424, 22.94007524, 22.93984634,
                    22.93915303, 22.93668618, 22.93492740, 22.93402973, 22.93431822, 22.93614110, 22.93839027, 22.93891077, 22.94170417]
boarding_trip2go = [8, 0, 1, 2, 7, 2, 6, 5, 2, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
unboarding_trip2go = [0, 0, 0, 0, 4, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 20, 1]
secstop_trip2go = [0, 0, 8, 10, 13, 11, 12, 11, 10, 9, 9, 8, 9, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 9, 9, 0, 0, 16, 0]
time_delay_trip2go = [0, 4, 3, 2, 3, 4, 2, 3, 2, 3, 2, 1, 1, 2, 3, 1, 0, 1, 0, 1, 0, 1, 1, 2, 2, 1, 1, 1, 9, 6]
arr_time_trip2go = ["8:35:00 πμ", "8:36:00 πμ", "8:37:00 πμ", "8:37:00 πμ", "8:40:00 πμ", "8:42:00 πμ", "8:43:00 πμ", "8:45:00 πμ", "8:46:00 πμ", "8:47:00 πμ", "8:47:00 πμ", "8:48:00 πμ", "8:49:00 πμ", "8:51:00 πμ", "8:52:00 πμ", "8:53:00 πμ", "8:53:00 πμ", "8:54:00 πμ", "8:56:00 πμ", "8:57:00 πμ", "8:58:00 πμ", "8:58:00 πμ", "8:59:00 πμ", "8:59:00 πμ", "8:59:00 πμ", "9:00:00 πμ", "9:01:00 πμ", "9:02:00 πμ", "9:03:00 πμ"]
parked_car_trip2go = ["ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΝΑΙ", "ΝΑΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ"]
bus_lane_trip2go = ["ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΝΑΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ"]


# **Trip 2 Come**
stop_id_trip2come = ["009", "139", "030", "031", "032", "033", "157", "035", "374", "373", "372", "493", "370", "369", "083", "481", "501", "297", "295", "088", "476", "395", "458", "518", "514", "539", "094", "095", "498", "097"]
stop_lat_trip2come = [39.36136106, 39.36077844, 39.36214198, 39.36231483, 39.36211532, 
                      39.36151356, 39.36178413, 39.36498898, 39.36708182, 39.36794196, 
                      39.36894837, 39.37014210, 39.36984994, 39.36932386, 39.36998164, 
                      39.37216122, 39.37415221208357,39.3758723392, 39.37812275, 39.37990869, 
                      39.38179698, 39.38407013, 39.38298429, 39.38195998, 39.38232453, 
                      39.38409265, 39.38505766, 39.38610022, 39.38768229, 39.38681581]
stop_lon_trip2come = [22.93288320, 22.93343187, 22.93490889, 22.94010927, 22.94351001, 
                      22.94484682, 22.94628430, 22.94914580, 22.94968852, 22.94818737, 
                      22.94634166, 22.94415983, 22.94231831, 22.94092933, 22.93979662, 
                      22.93934571, 22.93896113514612, 22.938617157, 22.94108833, 22.94003079, 
                      22.93980353, 22.93915795, 22.93671654, 22.93492312, 22.93397525, 
                      22.93431884, 22.93598064, 22.93838232, 22.93893073, 22.94170417]
boarding_trip2come = [0, 1, 2, 0, 0, 0, 0, 0, 1, 2, 0, 0, 1, 2, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0]
unboarding_trip2come = [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 2, 1, 1, 1, 1, 2, 0, 1, 0, 0, 2, 0]
secstop_trip2come = [0, 0, 10, 0, 0, 0, 0, 0, 8, 10, 0, 0, 8, 10, 0, 0, 0, 10, 10, 11, 10, 11, 10, 11, 9, 9, 0, 0, 9, 0]
time_delay_trip2come = [0, 5, 5, 5, 6, 6, 4, 3, 5, 3, 4, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 1, 1, 1, 2, 2, 2, 1, 1, 1]
arr_time_trip2come = ["9:15:00 πμ", "9:16:00 πμ", "9:17:00 πμ", "9:18:00 πμ", "9:18:00 πμ", "9:19:00 πμ", "9:20:00 πμ", "9:22:00 πμ", "9:23:00 πμ", "9:23:00 πμ", "9:24:00 πμ", "9:26:00 πμ", "9:28:00 πμ", "9:29:00 πμ", "9:30:00 πμ", "9:30:00 πμ", "9:31:00 πμ", "9:32:00 πμ", "9:33:00 πμ", "9:34:00 πμ", "9:36:00 πμ", "9:36:00 πμ", "9:39:00 πμ", "9:41:00 πμ", "9:41:00 πμ", "9:43:00 πμ", "9:43:00 πμ", "9:44:00 πμ", "9:44:00 πμ", "9:44:00 πμ"]
parked_car_trip2come = ["ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΝΑΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ"]
bus_lane_trip2come = ["ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ", "ΟΧΙ"]
poly_lat_go = [  39.36136106, 39.36149570, 39.36166549, 39.36166224, 39.36167329, 
  39.36170126, 39.36174365, 39.36177034, 39.36181670, 39.36191974, 
  39.36218013, 39.36241016, 39.36247939, 39.36249715, 39.36250818, 
  39.36249958, 39.36246352, 39.36226417, 39.36224361, 39.36218598, 
  39.36213444, 39.36209387, 39.36208845, 39.36211199, 39.36216254, 
  39.36219461, 39.36218566, 39.36216784, 39.36215861, 39.36216107, 
  39.36215478, 39.36213678, 39.36211872, 39.36207900, 39.36201158, 
  39.36193610, 39.36186478, 39.36179619, 39.36171935, 39.36162122, 
  39.36147920, 39.36141745, 39.36137339, 39.36124103, 39.36090598, 
  39.36043138, 39.36004440, 39.36005211, 39.36012903, 39.36027471, 
  39.36048395, 39.36088393, 39.36160180, 39.36233837, 39.36275773, 
  39.36303557, 39.36349101, 39.36409157, 39.36444619, 39.36498537, 
  39.36574777, 39.36588925, 39.36594346, 39.36600161, 39.36606537, 
  39.36672797, 39.36709786, 39.36745323, 39.36779208, 39.36824979, 
  39.36865165, 39.36908440, 39.36937327, 39.36968096, 39.37005255, 
  39.37033104, 39.37042428, 39.37044689, 39.37043775, 39.37039605, 
  39.37027055, 39.37003628, 39.36988443, 39.36971633, 39.36956115, 
  39.36936366, 39.36921917, 39.36905763, 39.36904871, 39.36918110, 
  39.36966313, 39.37019043, 39.37058497, 39.37124631, 39.37180132, 
  39.37202174, 39.37258209, 39.37289472, 39.37321101, 39.37375461, 
  39.37436198, 39.37499092, 39.37555603, 39.37595333, 39.37600949, 
  39.37605525, 39.37611781, 39.37636451, 39.37662693, 39.37688785, 
  39.37714192, 39.37734742, 39.37751964, 39.37760780, 39.37775580, 
  39.37784743, 39.37794121, 39.37808301, 39.37856818, 39.37894973, 
  39.37921499, 39.37939342, 39.37974314, 39.38084749, 39.38109591, 
  39.38178871, 39.38238531, 39.38281120, 39.38311467, 39.38359308, 
  39.38380958, 39.38407889, 39.38416438, 39.38419882, 39.38420241, 
  39.38420241, 39.38404681, 39.38378546, 39.38351497, 39.38335131, 
  39.38303789, 39.38212732, 39.38183184, 39.38182003, 39.38182346, 
  39.38186130, 39.38196227, 39.38278680, 39.38337426, 39.38343830, 
  39.38348914, 39.38361421, 39.38369548, 39.38426781, 39.38466765, 
  39.38505836, 39.38538253, 39.38563999, 39.38575705, 39.38582566, 
  39.38611283, 39.38613724, 39.38616680, 39.38618537, 39.38626200, 
  39.38637261, 39.38679872, 39.38734232, 39.38748110, 39.38756753, 
  39.38761270, 39.38765510, 39.38767076, 39.38764568, 39.38757297, 
  39.38746880, 39.38714564, 39.38703614, 39.38690087, 39.38680054, 
  39.38638381, 39.38613923, 39.38594833, 39.38598755, 39.38651583, 
  39.38656782, 39.38666517, 39.38681581]
poly_long_go = [  22.93288320, 22.93323810, 22.93341558, 22.93352939, 22.93366778, 
  22.93372871, 22.93378637, 22.93385746, 22.93410159, 22.93442591, 
  22.93521106, 22.93595607, 22.93616666, 22.93627793, 22.93642400, 
  22.93658954, 22.93681257, 22.93788441, 22.93797285, 22.93806565, 
  22.93810932, 22.93819653, 22.93828286, 22.93836570, 22.93843687, 
  22.93845114, 22.93868836, 22.93970447, 22.94093188, 22.94138509, 
  22.94149044, 22.94157717, 22.94165263, 22.94175857, 22.94187659, 
  22.94197828, 22.94206529, 22.94215206, 22.94226186, 22.94243182, 
  22.94294884, 22.94317589, 22.94333131, 22.94363977, 22.94439632, 
  22.94542850, 22.94623030, 22.94627652, 22.94635242, 22.94650274, 
  22.94670853, 22.94709222, 22.94775250, 22.94844039, 22.94882675, 
  22.94909442, 22.94950105, 22.95006001, 22.95040684, 22.95090569, 
  22.95161907, 22.95175486, 22.95177346, 22.95176771, 22.95166627, 
  22.95048937, 22.94984539, 22.94920131, 22.94860035, 22.94775783, 
  22.94706205, 22.94626581, 22.94572394, 22.94518611, 22.94450513, 
  22.94400209, 22.94379588, 22.94372977, 22.94367251, 22.94353865, 
  22.94318783, 22.94258919, 22.94220738, 22.94176849, 22.94134290, 
  22.94085033, 22.94048330, 22.94007713, 22.93999471, 22.93995675, 
  22.93987934, 22.93978140, 22.93971115, 22.93956200, 22.93946851, 
  22.93941982, 22.93929319, 22.93926208, 22.93918093, 22.93908544, 
  22.93896192, 22.93884536, 22.93874279, 22.93866676, 22.93865365, 
  22.93868522, 22.93878809, 22.93917169, 22.93955997, 22.93993807, 
  22.94030980, 22.94061412, 22.94088398, 22.94102365, 22.94126174, 
  22.94133861, 22.94130917, 22.94120190, 22.94085434, 22.94061006, 
  22.94045415, 22.94036153, 22.94017537, 22.93973720, 22.93968172, 
  22.93984797, 22.94001230, 22.94000494, 22.93994667, 22.93975021, 
  22.93966251, 22.93957063, 22.93954176, 22.93949407, 22.93943046, 
  22.93934600, 22.93900133, 22.93841804, 22.93770414, 22.93733224, 
  22.93671638, 22.93512244, 22.93462835, 22.93454017, 22.93445562, 
  22.93437059, 22.93430446, 22.93371458, 22.93333389, 22.93329308, 
  22.93329341, 22.93353505, 22.93370815, 22.93472542, 22.93541828, 
  22.93608240, 22.93662441, 22.93706485, 22.93729986, 22.93747515, 
  22.93859840, 22.93874617, 22.93885770, 22.93890863, 22.93888618, 
  22.93885466, 22.93874165, 22.93853863, 22.93849426, 22.93850084, 
  22.93852688, 22.93862514, 22.93873850, 22.93883971, 22.93891077, 
  22.93901233, 22.93909980, 22.93923125, 22.93958458, 22.93990854, 
  22.94126230, 22.94204235, 22.94258821, 22.94262926, 22.94278694, 
  22.94277329, 22.94245063, 22.94170417]
poly_long_come = [22.94170417, 22.94122225, 22.94042537, 22.93975707, 22.93951128, 22.93925201, 22.93914297, 22.9390776, 22.93903531, 22.93903724, 22.9390455, 22.93901897, 22.93893073, 22.93875622, 22.93860649, 22.93849494, 22.93840278, 22.93836586, 22.93834588, 22.9383501, 22.93853988, 22.93877763, 22.93878239, 22.93877099, 22.93875714, 22.93872128, 22.93868338, 22.93864347, 22.93860137, 22.93765709, 22.9374808, 22.93742325, 22.93735097, 22.93728994, 22.93715055, 22.93701501, 22.93695748, 22.93688628, 22.93631161, 22.93545668, 22.93479493, 22.93417014, 22.93364151, 22.93338135, 22.93328371, 22.93324601, 22.9332297, 22.93321087, 22.93319578, 22.93319175, 22.93319831, 22.93321627, 22.9332424, 22.93367292, 22.93411979, 22.93433691, 22.93438068, 22.93441558, 22.93446377, 22.93451717, 22.93460457, 22.93463036, 22.9346908, 22.93517167, 22.93564312, 22.93608036, 22.93652296, 22.93698542, 22.93741347, 22.93775335, 22.93827947, 22.93871786, 22.93924499, 22.93938251, 22.93940511, 22.93942342, 22.93944541, 22.93946175, 22.93947376, 22.93948276, 22.93949724, 22.93965687, 22.93977649, 22.93990146, 22.93992727, 22.93994914, 22.93995438, 22.93995652, 22.93992952, 22.93984314, 22.93970043, 22.93967296, 22.93966748, 22.93966375, 22.93966453, 22.93956916, 22.93956909, 22.9396272, 22.93968005, 22.93970957, 22.93994143, 22.94011959, 22.94043945, 22.94067695, 22.94104453, 22.94127203, 22.94126048, 22.94121676, 22.94118563, 22.94081304, 22.94057477, 22.94006117, 22.93984495, 22.93939602, 22.93888105, 22.93872143, 22.93864632, 22.93861325, 22.93860277, 22.93859523, 22.93859076, 22.93859786, 22.93860914, 22.93869581, 22.93877101, 22.93882036, 22.93889227, 22.93896948, 22.93903632, 22.93911216, 22.93921679, 22.93930903, 22.93936035, 22.9394587, 22.93955857, 22.93963365, 22.93973709, 22.93985997, 22.93993284, 22.93996689, 22.93998239, 22.93999846, 22.94001212, 22.94003877, 22.94007008, 22.94013944, 22.94066505, 22.94116825, 22.94174748, 22.94226367, 22.94287972, 22.94353197, 22.94367851, 22.94370213, 22.943727, 22.94375689, 22.94379079, 22.9438131, 22.94385745, 22.94388485, 22.94432532, 22.94476735, 22.94536354, 22.94563481, 22.94623223, 22.94686159, 22.9473599, 22.94793592, 22.94864001, 22.94922749, 22.94985838, 22.95019604, 22.95052095, 22.95057349, 22.95060576, 22.950616, 22.95061061, 22.95059808, 22.95054246, 22.95017014, 22.9498399, 22.94952862, 22.9491458, 22.94873445, 22.94848714, 22.94821056, 22.9478947, 22.9475861, 22.94723218, 22.94695065, 22.94674389, 22.94653552, 22.9462781, 22.9459818, 22.94572076, 22.9457092, 22.9456915, 22.94565311, 22.94549085, 22.94520337, 22.94478298, 22.94456436, 22.94392822, 22.94364358, 22.94315747, 22.94298215, 22.94285855, 22.94252969, 22.94233285, 22.94208808, 22.94195524, 22.94187498, 22.94157081, 22.94098928, 22.94068052, 22.94010927, 22.93958826, 22.93933748, 22.9388358, 22.93858648, 22.93829862, 22.93819278, 22.93809857, 22.93795429, 22.93786002, 22.93731156, 22.93676133, 22.93658175, 22.93649592, 22.93638891, 22.93596972, 22.93568657, 22.93514036, 22.93454367, 22.93410772, 22.93394233, 22.93382248, 22.9336598, 22.93352303, 22.93347486, 22.93343308, 22.93342399, 22.93344, 22.93345535, 22.93349241, 22.93355194, 22.93365165, 22.93377264, 22.93387325, 22.9339749, 22.93406251, 22.9341467, 22.93427582, 22.93429128, 22.93424118, 22.93410969, 22.93388928, 22.93358528, 22.93343187, 22.93316742, 22.9331075, 22.93292003, 22.93275399, 22.93267266, 22.9326698, 22.9328832]
poly_lat_come = [39.38681581, 39.38638157, 39.38663342, 39.38684495, 39.38690833, 39.38700446, 39.38707366, 39.38714171, 39.38724449, 39.38745676, 39.38753481, 39.38760818, 39.38768229, 39.38773431, 39.38775929, 39.38777025, 39.38773763, 39.3877077, 39.38766622, 39.38759201, 39.3869987, 39.38626801, 39.38623954, 39.38621677, 39.38620532, 39.3861927, 39.38618142, 39.38617044, 39.38615713, 39.38591181, 39.38586671, 39.3858491, 39.38582284, 39.38579005, 39.38573216, 39.38566421, 39.38563277, 39.38557844, 39.38525177, 39.38475037, 39.38436708, 39.38400694, 39.3837127, 39.38356597, 39.38351681, 39.38349797, 39.38348385, 39.38347077, 39.38345172, 39.38342207, 39.38339703, 39.38337063, 39.3833444, 39.38275805, 39.38211727, 39.38177408, 39.38172993, 39.38172617, 39.38172295, 39.38173598, 39.38176829, 39.38178496, 39.38182459, 39.38210762, 39.3823802, 39.38260973, 39.38287476, 39.38313643, 39.3833547, 39.3835004, 39.38369164, 39.38387419, 39.38410888, 39.38417562, 39.38418487, 39.38418401, 39.38417253, 39.38416261, 39.38414672, 39.38412732, 39.38410204, 39.38369431, 39.38339772, 39.38304914, 39.38293527, 39.38281468, 39.38261545, 39.38249283, 39.3823486, 39.38194652, 39.38140769, 39.38134353, 39.38130154, 39.38128195, 39.38124897, 39.3809664, 39.38092023, 39.38084771, 39.38076357, 39.38069006, 39.38012133, 39.37969738, 39.37914335, 39.37874634, 39.3781928, 39.37788362, 39.37781495, 39.37776927, 39.37774971, 39.37750345, 39.37734943, 39.37700635, 39.37686799, 39.37657781, 39.37622622, 39.37613527, 39.37609786, 39.37607145, 39.37605038, 39.37603456, 39.37600356, 39.37597687, 39.37594898, 39.37553757, 39.37515527, 39.37488966, 39.37452889, 39.37416484, 39.37380024, 39.3733727, 39.37279521, 39.37232897, 39.37209427, 39.37160846, 39.37114275, 39.37073959, 39.37032455, 39.36961678, 39.36915278, 39.36904628, 39.36902, 39.36900608, 39.36899583, 39.36898819, 39.36899973, 39.36902245, 39.36922123, 39.36941665, 39.3696207, 39.36982769, 39.3700785, 39.37032133, 39.37037367, 39.37037403, 39.37036584, 39.37035363, 39.37033663, 39.37032402, 39.37030235, 39.37028838, 39.37005406, 39.36980513, 39.36948459, 39.36934398, 39.36900768, 39.36866658, 39.3684042, 39.36808298, 39.3676881, 39.36734456, 39.36698502, 39.36680422, 39.36662104, 39.36658456, 39.36656169, 39.36654012, 39.36651505, 39.36649144, 39.36644408, 39.36605177, 39.36571169, 39.36537825, 39.36498898, 39.36457256, 39.36429891, 39.36401067, 39.36371099, 39.36338996, 39.36297766, 39.36263085, 39.36238097, 39.36210342, 39.36177589, 39.36138238, 39.36107063, 39.36106799, 39.36107448, 39.36109872, 39.36118803, 39.36134895, 39.36154304, 39.36164677, 39.36193464, 39.36205756, 39.36226777, 39.36227438, 39.36228504, 39.36230167, 39.36231821, 39.36239651, 39.36238954, 39.36237834, 39.36231868, 39.36230989, 39.3623217, 39.36231483, 39.36232747, 39.36232688, 39.36231323, 39.36233459, 39.36240385, 39.3623869, 39.36236779, 39.36234245, 39.36234291, 39.36241369, 39.36252309, 39.36254475, 39.36255235, 39.36255519, 39.36246998, 39.36237356, 39.36221064, 39.36203366, 39.36189355, 39.36187416, 39.36189866, 39.36195241, 39.36193719, 39.3619018, 39.36185966, 39.36181731, 39.36177343, 39.36174317, 39.36171203, 39.361683, 39.36167638, 39.36169215, 39.36169886, 39.36165868, 39.36158004, 39.36147736, 39.3612518, 39.36119039, 39.36113184, 39.36107087, 39.36097736, 39.36084958, 39.36077844, 39.3606761, 39.36067124, 39.36066456, 39.36075596, 39.36087443, 39.36119137, 39.36136106]

##Color scales
#Trip1go
def color_scale1(secstop_trip1go):
    if secstop_trip1go < 5:
        return 'green'
    elif 5 <= secstop_trip1go < 10:
        return 'yellow'
    elif 10 <= secstop_trip1go < 15:
        return 'orange'
    else:
        return 'red'
#Trip1come
def color_scale2(secstop_trip1come):
    if secstop_trip1come < 5:
        return 'green'
    elif 5 <= secstop_trip1come < 10:
        return 'yellow'
    elif 10 <= secstop_trip1come < 15:
        return 'orange'
    else:
        return 'red' 
#Trip2go
def color_scale3(secstop_trip2go):
    if secstop_trip2go < 5:
        return 'green'
    elif 5 <= secstop_trip2go < 10:
        return 'yellow'
    elif 10 <= secstop_trip2go < 15:
        return 'orange'
    else:
        return 'red' 
#Trip2come
def color_scale4(secstop_trip2come):
    if secstop_trip2come < 5:
        return 'green'
    elif 5 <= secstop_trip2come < 10:
        return 'yellow'
    elif 10 <= secstop_trip2come < 15:
        return 'orange'
    else:
        return 'red'
    

def create_popup(boardings, unboarding, stop_id, sec_stop, time_delay, arr_time, parked_car, bus_lane):
    html = f"""
    <div style="width: 250px; font-size: 14px;">
        <strong>Stop ID:</strong> {stop_id}<br>
        <strong>Boardings:</strong> {boardings}<br>
        <strong>Unboardings:</strong> {unboarding}<br>
        <strong>Arrival Time:</strong> {arr_time}<br>
        <strong>Time in Stop:</strong> {sec_stop}"<br>
        <strong>Time Delay:</strong> {time_delay}'<br>
        <strong>Parked Car in Bus Lane:</strong> {parked_car}<br>
        <strong>Bus Lane Usage:</strong> {bus_lane}
    </div>
    """
    return folium.Popup(html, max_width=250, min_width=150)


trip1_go_layer = folium.FeatureGroup(name="Trip 1 Afethria - Fytoko")
trip1_come_layer = folium.FeatureGroup(name="Trip 1 Fytoko - Afethria")
trip2_go_layer = folium.FeatureGroup(name="Trip 2 Afethria - Fytoko")
trip2_come_layer = folium.FeatureGroup(name="Trip 2 Fytoko - Afethria")
afethria_fytoko_layer = folium.FeatureGroup(name="Afethria - Fytoko Line")
fytoko_afethria_layer = folium.FeatureGroup(name="Fytoko - Afethria Line")

AntPath(
    locations=list(zip(poly_lat_go, poly_long_go)),
    color='purple',
    pulse_color = 'purple',
    weight=4,
    opacity=0.7,
    delay = 1000
).add_to(afethria_fytoko_layer)

AntPath(
    locations=list(zip(poly_lat_come, poly_long_come)),
    color='purple',
    pulse_color = 'purple',
    weight=4,
    reverse=False,
    opacity=0.7,
    delay = 1000
).add_to(fytoko_afethria_layer)



for i in range(len(stop_id_trip1go)):
    popup_content =popup = create_popup(boarding_trip1go[i], unboarding_trip1go[i], stop_id_trip1go[i], secstop_trip1go[i], time_delay_trip1go[i], arr_time_trip1go[i], parked_car_trip1go[i], bus_lane_trip1go[i])
    folium.CircleMarker(
        radius=6,
        color='black',
        fill_color = color_scale1(secstop_trip1go[i]),
        fill=True,
        fill_opacity=1,
        weight = 1,
        location=[stop_lat_trip1go[i], stop_lon_trip1go[i]],
        popup=popup_content
    ).add_to(trip1_go_layer)

for i in range(len(stop_id_trip1come)):
    popup_content =popup = create_popup(boarding_trip1come[i], unboarding_trip1come[i], stop_id_trip1come[i], secstop_trip1come[i], time_delay_trip1come[i], arr_time_trip1come[i], parked_car_trip1come[i], bus_lane_trip1come[i])
    folium.CircleMarker(
        radius=6,
        color='black',
        fill_color = color_scale2(secstop_trip1come[i]),
        fill=True,
        fill_opacity=1,
        weight = 1,
        location=[stop_lat_trip1come[i], stop_lon_trip1come[i]],
        popup=popup_content
    ).add_to(trip1_come_layer)


for i in range(len(stop_id_trip2go)):
    popup_content =popup = create_popup(boarding_trip2go[i], unboarding_trip2go[i], stop_id_trip2go[i], secstop_trip2go[i], time_delay_trip2go[i], arr_time_trip2go[i], parked_car_trip2go[i], bus_lane_trip2go[i])  
    folium.CircleMarker(
        radius=6,
        color='black',
        fill_color = color_scale3(secstop_trip2go[i]),
        fill=True,
        fill_opacity=1,
        weight = 1,
        location=[stop_lat_trip2go[i], stop_lon_trip2go[i]],
        popup=popup_content
    ).add_to(trip2_go_layer)

for i in range(len(stop_id_trip2come)):
    popup_content =create_popup(boarding_trip2come[i], unboarding_trip2come[i], stop_id_trip2come[i], secstop_trip2come[i], time_delay_trip2come[i], arr_time_trip2come[i], parked_car_trip2come[i], bus_lane_trip2come[i])  
    folium.CircleMarker(
        radius=6,
        color='black',
        fill_color = color_scale4(secstop_trip2come[i]),
        fill=True,
        fill_opacity=1,
        weight = 1,
        location=[stop_lat_trip2come[i], stop_lon_trip2come[i]],
        popup=popup_content
    ).add_to(trip2_come_layer)

#Layers
trip1_go_layer.add_to(map)
trip1_come_layer.add_to(map)
trip2_go_layer.add_to(map)
trip2_come_layer.add_to(map)
afethria_fytoko_layer.add_to(map)
fytoko_afethria_layer.add_to(map)


folium.LayerControl().add_to(map)

#Legend
legend_html = '''
     <style>
     .map-legend {
         position: fixed;
         bottom: 50px;
         right: 50px;
         width: 220px;
         height: 180px;
         background-color: white;
         z-index: 1000;
         padding: 5px;
         border: 2px solid black;
         border-radius: 5px;
         opacity: 0.5; 
         transition: opacity 0.3s ease; 
     }
     .map-legend:hover {
         opacity: 1; 
     }
          </style>
     <div class="map-legend">
     <h4><strong>Map Legend</strong></h4>
     <p><i style="background:green; width: 15px; vertical-align:middle; height: 15px; display: inline-block; border-radius: 80%; border: 2px solid black; "></i> Less than 5 Seconds in Stop</p>
     <p><i style="background:yellow; width: 15px; vertical-align:middle; height: 15px; display: inline-block; border-radius: 80%; border: 2px solid black; "></i> Less than 10 Seconds in Stop</p>
     <p><i style="background:orange; width: 15px; vertical-align:middle; height: 15px; display: inline-block; border-radius: 80%; border: 2px solid black;"></i> Less than 15 Seconds in Stop</p>
     <p><i style="background:red; width: 15px; vertical-align:middle; height: 15px; display: inline-block; border-radius: 80%; border: 2px solid black;"></i> Over 15 Seconds in Stop</p>
     <p><i style="background:purple; width: 30px; height: 5px; vertical-align:10%; display: inline-block;"></i> Bus Line 2</p>
     </div>
     '''
map.get_root().html.add_child(folium.Element(legend_html))

map.save(r"E:\University\9ο ΕΞΑΜΗΝΟ\ΣΥΣΤΗΜΑΤΑ ΑΣΤΙΚΩΝ ΣΥΓΚΟΙΝΩΝΙΩΝ\ERGASIA EKSAMHNOU\trip_map.html")
